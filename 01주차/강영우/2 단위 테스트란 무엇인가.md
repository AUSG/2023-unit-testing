# 2. 단위 테스트란 무엇인가

- 단위 테스트란?
    - 작은 코드조각을 검증하고, 빠르게 수행하고, 격리된 방식으로 처리하는 자동화 된 테스트이다.
- 공유 의존성, 비공개 의존성, 휘발성 의존성 간의 차이점
    - 공유 의존성: 테스트 간에 공유되고 서로의 결과에 영향을 미칠 수 있는 수단을 제공하는 의존성
        - 싱글턴
    - 비공개 의존성: 공유하지 않는 의존성
    - 프로세스 외부 의존성: 애플리케이션 실행 프로세스 외부에서 실행되는 의존성이며 아직 메모리에 없는 데이터에 대한 proxy이다
        - 읽기 전용 API 서비스
    - 데이터베이스는 공유 의존성이자, 프로세스 외부 의존성이다.
    - 휘발성 의존성: 개발자 머신에 기본 설치된 환경 외에 런타임 환경의 설정 및 구성을 요구한다. 또는 비결정적 동작을 포함한다.
- 단위 테스트의 두 분파: 고전파와 런던파
    - 런던파
        - 테스트 대상 시스템을 협력자에게서 격리하는 것을 “격리”로 생각함
        - 하나의 클래스가 다른 클래스 또는 여러 클래스에 의존하면 모든 의존성을 테스트 대역으로 대체한다. 이렇게 격리 요구 사항에 다가간다.
    - 고전파
        - 협력자를 대체하지 않고 운영용 인스턴스를 사용한다.
        - 코드를 격리하는 것이 아닌 테스트를 서로 격리한다.
    
    |  | 격리 주체 | 단위의 크기 | 테스트 대역 사용 대상 |
    | --- | --- | --- | --- |
    | 런던파 | 단위 | 단일 클래스 | 불변 의존성 외 모든 의존성 |
    | 고전파 | 단위 테스트 | 단일 클래스 또는 클래스 세트 | 공유 의존성 |
    - 목을 사용하는 테스트는 고전적인 테스트보다 불안정한 경향이 있기 때문에 고전파가 조금 더 선호되는 편
- 단위 테스트, 통합 테스트, 엔드 투 엔드 테스트의 차이점
    - 고전파 방식으로 단위테스트를 다시 정의한다면
        - 단일 동작 단위를 검증하고
        - 빠르게 수행하고
        - 다른 테스트와 별도로 처리한다.
    - 통합 테스트는 위 기준 중 하나를 충족하지 않는 테스트이다.
        - 둘 이상의 동작 단위를 검증할 때의 테스트는 통합테스트이다.
    - 엔드 투 엔드 테스트는 통합테스트의 일부이다.
        - 엔드 투 엔드 테스트가 일반적으로 통합테스트 보다 의존성을 더 많이 포함한다.
        - 유지보수 측면에서 가장 비용이 많이 들기 때문에 가장 후반에 실행하는 것이 좋다.