# 11. 단위 테스트 안티 패턴

## 비공개 메서드 단위 테스트

- 전혀 하지 말아야 한다.
- 비공개 메서드가 너무 복잡하면 별도의 클래스로 도출해야 한다.(추상화 필요)
- 비공개 메서드 테스트가 타당한 경우도 있다.
    - 구현 세부사항을 테스트 하면 궁극적으로 테스트가 깨지기 쉽다.
    - 어쩔 수 없다면 리플랙션을 통해 비공개 메서드를 인스턴스화할 수 있다.

## 단위 테스트를 하기 위한 비공개 메서드 노출

- 식별할 수 없는 동작과 구현 세부 사항을 잘 구분해야한다.
- 테스트 유의성을 위해 공개 API 노출 영역을 넓히는 것은 좋지 않은 습관이다.

## 테스트로 유출된 도메인 지식

- 메서드에서 사용하는 알고리즘을 테스트에서 expected로 그대로 사용하지 말라.

## 코드 오염

- 코드 오염은 테스트에만 필요한 제품 코드를 추가하는 것이다.
- 테스트 코드와 제품 코드가 혼재돼 유지비가 증가된다.
    - 이를 방지하려면 테스트 코드를 제품 코드 베이스와 분리해야한다.
    - 테스트 코드용 제품코드를 또 만들기

## 구체 클래스 목 처리

- 인터페이스를 이용해 목을 처리하는 것이 아닌, 구체 클래스 대신 목으로 처리해서 기능 일부를 보존하는 방법은 단일 책임 원칙을 위배하는 중대한 단점이다.