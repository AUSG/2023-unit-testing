## 6장 단위 테스트 스타일

- 단위 테스트는 크게 3가지 스타일로 나눌수 있다. (품질 순)
  1. 출력 기반 테스트
  2. 상태 기반 테스트
  3. 통신 기반 테스트
- 함수형 아키텍처를 활용해 코드를 함수형 코어와 가변 셸이라는 두 가지 범주로 분리해냄으로서 상태, 통신 기반 테스트를 함수형 코어를 이용해 출력 기반 테스트로 전환할 수 있다.
- 모든 코드베이스를 함수형 아키텍처로 전환할 수는 없기 때문에 성능, 유지 보수성, 시스템의 복잡도, 중요성 등을 고려하여 함수형 아키텍처를 전략적으로 적용하라.

## 7장 가치 있는 단위 테스트를 위한 리팩터링

- 도메인 모델 및 알고리즘
  - 단위 테스트 가성비가 가장 좋다.
  - 해당 테스트의 회귀 방지가 뛰어나기 때문에 단위 테스트에서 가장 이롭다.
- 간단한 코드
  - 테스트할 가치가 전혀 없다.
- 컨트롤러
  - 통합 테스트를 통해 간단히 테스트해야 한다.
- 지나치게 복잡한 코드
  - 컨트롤러와 복잡한 코드로 분할해야 한다.
- 도메인 유의성은 해당 코드가 얼마나 중요한지를 보여준다.
- 코드의 깊이(중요하거나 복잡함)와 너비(협력자가 많음)의 관점에서 로직과 오케스트레이션 책임을 생각하라. 둘 다 해당되면 안된다.
- 의사 결정 프로세스 단계를 세분화하는 것이 가장 효율적이다. CanExecute/Execute, 도메인 이벤트 이 2가지 패턴을 사용해 컨트롤러 복잡도 증가를 완화할 수 있다.
- 추상화할 것을 테스트하기보다 추상화를 테스트하는 것이 더 쉽다.
