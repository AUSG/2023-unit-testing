# 6장. 단위 테스트 스타일

-   테스트
    -   출력 기반 테스트
        -   숨은 입출력이 없다 가정하고, 입력에 따른 출력을 확인
        -   품질이 가장 좋음
    -   상태 기반 테스트
        -   작업이 완료된 후의 시스템 상태를 확인
            -   고전파는 이것을 통신 기반 테스트보다 선호
    -   통신 기반테스트
        -   목을 사용해서 시스템과 협력자간의 통신을 검증

-   함수형 아키텍쳐와 육각형 아키텍쳐
    -   함수형 아키텍쳐는 모든 사이드 이펙트를 도메인 밖으로 밀어낸다.
    -   육각형 아키텍쳐는 도메인 계층에의해 만들어진 사이드 이펙트까지는 괜찮다.
-   절충
    -   함수형아키텍처는 성능과 코드 유지보수성 사이의 선택이다.
        -   유지 보수성 향상을 위해  성능을 희생한다.
    -   모든 코드를 함수형 아키텍쳐로 전환할 수 없다. 절충해서 잘 선택하자.



# 7장. 가치 있는 단위 테스트를 위한 리팩터링

-   코드의  네 가지 유형
    -   복잡도 또는 도메인 유의성
    -   협력자 수
    -   위 2가지 항목으로 2차원으로 분류 가능
-   테스트
    -   도메인 모델 및 알고리즘은 협력자가 적어 노력 대비 가장 이로운 테스트이다.
    -   복잡도가 낮은 간단한 코드는 테스트할 가치가 없다.
    -   컨트롤러는 통합테스트를 통해 간단히 테스트해야한다.
    -   지나치게 복잡한 코드는 컨트롤러와 복잡한 코드로 분리해야한다.

-   중요한 코드는 협력자가 적어야한다.
    -   도메인 모델은 순수하면 순수할 수록 좋고, 의존성 방향은 들어오는 것만 존재하는게 좋다는 이야기인듯.
-   이벤트
    -   도메인 이벤트는 도메인 모델의 변경사항을 외부 의존성에 대한 호출로 변환한다. 컨트롤러에서 추적의 책임이 없어진다.
    -   도메인 이벤트는 외부 의존성 호출 위의 추상화이다.
-   식별할 수 있는 동작과 구현 세부 사항을 양파의 여러 겹으로 생각하라.
    -   외부 계층 관점에서 각 계층을 테스트하고, 해당 계층이 기저 계층과 어떻게 통신하는지 무시하라.
